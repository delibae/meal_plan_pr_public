import{r as g,g as E,w as i,s as L,a0 as v,u as N,a1 as h,a2 as x,o as V,b as l,a as U,a3 as F,x as C,K as G,f as m,a4 as I,e as B,v as K,k as d,O as _,P as p,Q as W,j as z,y as A,a5 as H,T as P,U as f}from"./index.8f038bb2.js";import{_ as Q}from"./FormCheckRadioGroup.64285301.js";const q={key:0},J={class:"space-y-3"},R=m("h1",{class:"text-2xl",style:{"text-align":"center"}},null,-1),X=m("p",{style:{"text-align":"center"}},"Loading...",-1),Z={key:1},ee={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ae={class:"w-full flex flex-row justify-center"},le={beforeMount(){var D=h+":"+x+"/api/session";v.get(D,{withCredentials:!0}).then(function(n){console.log(n),n.data==""&&(window.location.href="/login")}).catch(function(n){console.log(n)}).then(function(){});var e=h+":"+x+"/api/profile";v.get(e,{withCredentials:!0}).then(function(n){console.log(n.data[0]);var w=n.data[0].user_name;N().setUser({name:w,email:"john@example.com",avatar:"https://avatars.dicebear.com/api/avataaars/example.svg?options[top][]=shortHair&options[accessoriesChance]=93"})}).catch(function(n){console.log(n)}).then(function(){})},methods:{test:function(){console.log(1)},change:function(){console.log(1),window.location.href="/login"}}},re=Object.assign(le,{__name:"GoalsView",setup(D){const e=g(null);var n=[];e.value={purpose:0,d_day:new Date().toISOString().slice(0,10),current_weight:"",goal_weight:"",minimum_kcal:""};function w(o,t,s,a){var r;return a.toLowerCase()=="f"?r=6.25*o+10*t-5*s-161:r=6.25*o+10*t-5*s+5,r}function M(o,t,s,a){console.log(a);var r=new Date,u=a.split("-");console.log(u),console.log(r);let y=r.getFullYear(),b=r.getMonth()+1,T=r.getDay();var k=[y,b,T],O=new Date(u[0],u[1],u[2]),Y=new Date(k[0],k[1],k[2]);let $=Math.floor((O-Y)/(1e3*60*60*24));console.log("goal_days = "+$);var j=o-(s-t)/$*7e3;return j}const c=g(null);c.value=!1,(async()=>{try{var o=await v.get(h+":"+x+"/api/profile",{withCredentials:!0});console.log("response >>",o),e.value.purpose=o.data[0].purpose,e.value.current_weight=o.data[0].current_weight,n.push(o.data[0].height),n.push(o.data[0].gender),n.push(o.data[0].age),e.value.d_day=new Date(o.data[0].d_day).toISOString().split("T")[0],e.value.goal_weight=o.data[0].goal_weight,e.value.minimum_kcal=o.data[0].minimum_kcal,console.log("form >> ",e.value),c.value=!0}catch(t){console.log("Error >>",t)}})();const S=async()=>{for(var o=window.location.host,t=h+":"+o+"/api/profile/updateGoal",s=new FormData,a=["purpose","current_weight","goal_weight","minimum_kcal","d_day"],r=0;r<a.length;r++)s.append(a[r],e.value[a[r]]);var u=w(n[0],e.value[a[1]],n[2],n[1]);s.append("bmr",u),console.log("bmr",u),s.append("kcal_per_day",M(u,e.value.goal_weight,e.value.current_weight,e.value.d_day)),console.log("test",s);try{var y=await v.post(t,s,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});console.log("response >> ",y),c.value=!0}catch(b){console.log("Error >>",b)}};return g(!0),g(0),(o,t)=>{const s=H("UserCard");return V(),E(L,{onChange:o.change},{default:i(()=>[l(A,null,{default:i(()=>[c.value?B("",!0):(V(),U("div",q,[l(F,{bg:"greenBlue"},{default:i(({cardClass:a})=>[l(C,{class:G(a)},{default:i(()=>[m("div",J,[R,l(I,{style:{"text-align":"center"}}),X])]),_:2},1032,["class"])]),_:1})])),c.value?(V(),U("div",Z,[l(K,{icon:d(P),title:"\uCCB4\uC911\uACFC \uBAA9\uD45C \uAE30\uB85D",main:""},null,8,["icon"]),l(s,{class:"mb-6"}),m("div",ee,[l(C,null,{default:i(()=>[l(_,{label:"\uC0AC\uC6A9 \uBAA9\uC801"},{default:i(()=>[l(Q,{modelValue:e.value.purpose,"onUpdate:modelValue":t[0]||(t[0]=a=>e.value.purpose=a),name:"sample-radio",type:"radio",options:{0:"\uB2E4\uC774\uC5B4\uD2B8",1:"\uBC8C\uD06C\uC5C5"}},null,8,["modelValue"])]),_:1}),l(_,{label:"\uB9C8\uAC10 \uB0A0\uC9DC",help:"\uCD5C\uB300 \uD55C \uB2EC \uD6C4\uAE4C\uC9C0 \uC120\uD0DD\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."},{default:i(()=>[l(p,{modelValue:e.value.d_day,"onUpdate:modelValue":t[1]||(t[1]=a=>e.value.d_day=a),"icon-left":d(f),help:"TargetDate",placeholder:"\uBAA9\uD45C \uB0A0\uC9DC \uC785\uB825 [YYYYMMDD]",type:"date"},null,8,["modelValue","icon-left"])]),_:1})]),_:1}),l(C,null,{default:i(()=>[l(_,{label:"\uD604\uC7AC \uBAB8\uBB34\uAC8C(kg)"},{default:i(()=>[l(p,{modelValue:e.value.current_weight,"onUpdate:modelValue":t[2]||(t[2]=a=>e.value.current_weight=a),"icon-left":d(f),help:"CurrentWeight",placeholder:"\uC22B\uC790\uB85C\uB9CC \uC785\uB825",type:"number"},null,8,["modelValue","icon-left"])]),_:1}),l(_,{label:"\uBAA9\uD45C \uBAB8\uBB34\uAC8C(kg)"},{default:i(()=>[l(p,{modelValue:e.value.goal_weight,"onUpdate:modelValue":t[3]||(t[3]=a=>e.value.goal_weight=a),"icon-left":d(f),help:"TargetWeight",placeholder:"\uC22B\uC790\uB85C\uB9CC \uC785\uB825",type:"number"},null,8,["modelValue","icon-left"])]),_:1}),l(_,{label:"\uCD5C\uC18C \uC12D\uCDE8 \uCE7C\uB85C\uB9AC(kcal)",help:"\uD558\uB8E8 \uB3D9\uC548 \uC12D\uCDE8\uD560 \uCD5C\uC18C \uC5F4\uB7C9\uC785\uB2C8\uB2E4."},{default:i(()=>[l(p,{modelValue:e.value.minimum_kcal,"onUpdate:modelValue":t[4]||(t[4]=a=>e.value.minimum_kcal=a),"icon-left":d(f),help:"TargetKcal",placeholder:"\uC22B\uC790\uB85C\uB9CC \uC785\uB825",type:"number"},null,8,["modelValue","icon-left"])]),_:1}),l(W),m("div",ae,[l(z,{onClick:S,class:"w-3/12",type:"submit",color:"info",label:"\uC800\uC7A5"})])]),_:1})])])):B("",!0)]),_:1})]),_:1},8,["onChange"])}}});export{re as default};
