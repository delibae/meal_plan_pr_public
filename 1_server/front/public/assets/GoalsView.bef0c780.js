import{r as g,g as Y,w as i,s as j,a0 as h,u as E,o as b,b as t,a as x,a1 as L,x as k,K as N,f as m,a2 as F,e as D,v as G,k as d,O as _,P as p,Q as I,j as K,y as W,a3 as z,T as A,U as f}from"./index.c47f4ab2.js";import{_ as H}from"./FormCheckRadioGroup.bd5e400b.js";const P={key:0},Q={class:"space-y-3"},q=m("h1",{class:"text-2xl",style:{"text-align":"center"}},null,-1),J=m("p",{style:{"text-align":"center"}},"Loading...",-1),R={key:1},X={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Z={class:"w-full flex flex-row justify-center"},ee={beforeMount(){var V="http://localhost:3001/api/session";h.get(V,{withCredentials:!0}).then(function(n){console.log(n),n.data==""&&(window.location.href="/login")}).catch(function(n){console.log(n)}).then(function(){});var e="http://localhost:3001/api/profile";h.get(e,{withCredentials:!0}).then(function(n){console.log(n.data[0]);var v=n.data[0].user_name;E().setUser({name:v,email:"john@example.com",avatar:"https://avatars.dicebear.com/api/avataaars/example.svg?options[top][]=shortHair&options[accessoriesChance]=93"})}).catch(function(n){console.log(n)}).then(function(){})},methods:{test:function(){console.log(1)},change:function(){console.log(1),window.location.href="/login"}}},oe=Object.assign(ee,{__name:"GoalsView",setup(V){const e=g(null);var n=[];e.value={purpose:0,d_day:new Date().toISOString().slice(0,10),current_weight:"",goal_weight:"",minimum_kcal:""};function v(o,a,s,l){var r;return l.toLowerCase()=="f"?r=6.25*o+10*a-5*s-161:r=6.25*o+10*a-5*s+5,r}function $(o,a,s,l){console.log(l);var r=new Date,u=l.split("-");console.log(u),console.log(r);let w=r.getFullYear(),B=r.getMonth()+1,M=r.getDay();var y=[w,B,M],S=new Date(u[0],u[1],u[2]),T=new Date(y[0],y[1],y[2]);let C=Math.floor((S-T)/(1e3*60*60*24));console.log("goal_days = "+C);var O=o-(s-a)/C*7e3;return O}const c=g(null);c.value=!1,(async()=>{try{var o=await h.get("http://localhost:3001/api/profile",{withCredentials:!0});console.log("response >>",o),e.value.purpose=o.data[0].purpose,e.value.current_weight=o.data[0].current_weight,n.push(o.data[0].height),n.push(o.data[0].gender),n.push(o.data[0].age),e.value.d_day=new Date(o.data[0].d_day).toISOString().split("T")[0],e.value.goal_weight=o.data[0].goal_weight,e.value.minimum_kcal=o.data[0].minimum_kcal,console.log("form >> ",e.value),c.value=!0}catch(a){console.log("Error >>",a)}})();const U=async()=>{for(var o="http://localhost:3001/api/profile/updateGoal",a=new FormData,s=["purpose","current_weight","goal_weight","minimum_kcal","d_day"],l=0;l<s.length;l++)a.append(s[l],e.value[s[l]]);var r=v(n[0],e.value[s[1]],n[2],n[1]);a.append("bmr",r),console.log("bmr",r),a.append("kcal_per_day",$(r,e.value.goal_weight,e.value.current_weight,e.value.d_day)),console.log("test",a);try{var u=await h.post(o,a,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});console.log("response >> ",u),c.value=!0}catch(w){console.log("Error >>",w)}};return g(!0),g(0),(o,a)=>{const s=z("UserCard");return b(),Y(j,{onChange:o.change},{default:i(()=>[t(W,null,{default:i(()=>[c.value?D("",!0):(b(),x("div",P,[t(L,{bg:"greenBlue"},{default:i(({cardClass:l})=>[t(k,{class:N(l)},{default:i(()=>[m("div",Q,[q,t(F,{style:{"text-align":"center"}}),J])]),_:2},1032,["class"])]),_:1})])),c.value?(b(),x("div",R,[t(G,{icon:d(A),title:"\uCCB4\uC911\uACFC \uBAA9\uD45C \uAE30\uB85D",main:""},null,8,["icon"]),t(s,{class:"mb-6"}),m("div",X,[t(k,null,{default:i(()=>[t(_,{label:"\uC0AC\uC6A9 \uBAA9\uC801"},{default:i(()=>[t(H,{modelValue:e.value.purpose,"onUpdate:modelValue":a[0]||(a[0]=l=>e.value.purpose=l),name:"sample-radio",type:"radio",options:{0:"\uB2E4\uC774\uC5B4\uD2B8",1:"\uBC8C\uD06C\uC5C5"}},null,8,["modelValue"])]),_:1}),t(_,{label:"\uB9C8\uAC10 \uB0A0\uC9DC",help:"\uCD5C\uB300 \uD55C \uB2EC \uD6C4\uAE4C\uC9C0 \uC120\uD0DD\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."},{default:i(()=>[t(p,{modelValue:e.value.d_day,"onUpdate:modelValue":a[1]||(a[1]=l=>e.value.d_day=l),"icon-left":d(f),help:"TargetDate",placeholder:"\uBAA9\uD45C \uB0A0\uC9DC \uC785\uB825 [YYYYMMDD]",type:"date"},null,8,["modelValue","icon-left"])]),_:1})]),_:1}),t(k,null,{default:i(()=>[t(_,{label:"\uD604\uC7AC \uBAB8\uBB34\uAC8C(kg)"},{default:i(()=>[t(p,{modelValue:e.value.current_weight,"onUpdate:modelValue":a[2]||(a[2]=l=>e.value.current_weight=l),"icon-left":d(f),help:"CurrentWeight",placeholder:"\uC22B\uC790\uB85C\uB9CC \uC785\uB825",type:"number"},null,8,["modelValue","icon-left"])]),_:1}),t(_,{label:"\uBAA9\uD45C \uBAB8\uBB34\uAC8C(kg)"},{default:i(()=>[t(p,{modelValue:e.value.goal_weight,"onUpdate:modelValue":a[3]||(a[3]=l=>e.value.goal_weight=l),"icon-left":d(f),help:"TargetWeight",placeholder:"\uC22B\uC790\uB85C\uB9CC \uC785\uB825",type:"number"},null,8,["modelValue","icon-left"])]),_:1}),t(_,{label:"\uCD5C\uC18C \uC12D\uCDE8 \uCE7C\uB85C\uB9AC(kcal)",help:"\uD558\uB8E8 \uB3D9\uC548 \uC12D\uCDE8\uD560 \uCD5C\uC18C \uC5F4\uB7C9\uC785\uB2C8\uB2E4."},{default:i(()=>[t(p,{modelValue:e.value.minimum_kcal,"onUpdate:modelValue":a[4]||(a[4]=l=>e.value.minimum_kcal=l),"icon-left":d(f),help:"TargetKcal",placeholder:"\uC22B\uC790\uB85C\uB9CC \uC785\uB825",type:"number"},null,8,["modelValue","icon-left"])]),_:1}),t(I),m("div",Z,[t(K,{onClick:U,class:"w-3/12",type:"submit",color:"info",label:"\uC800\uC7A5"})])]),_:1})])])):D("",!0)]),_:1})]),_:1},8,["onChange"])}}});export{oe as default};
