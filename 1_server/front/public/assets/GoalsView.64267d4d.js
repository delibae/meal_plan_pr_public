import{r as p,g as L,w as r,s as N,a0 as y,u as F,a1 as b,a2 as V,o as x,b as t,a as $,a3 as G,C as v,K as I,f,a4 as K,e as B,v as W,k as g,O as c,P as h,Q as z,j as A,x as H,a5 as P,T as Q,U as w}from"./index.d49c5c61.js";import{_ as M}from"./FormCheckRadioGroup.b8005fe6.js";const q={key:0},J={class:"space-y-3"},R=f("h1",{class:"text-2xl",style:{"text-align":"center"}},null,-1),X=f("p",{style:{"text-align":"center"}},"Loading...",-1),Z={key:1},ee={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ae={class:"w-full flex flex-row justify-center"},le={beforeMount(){var D=b+":"+V+"/api/session";y.get(D,{withCredentials:!0}).then(function(n){console.log(n),n.data==""&&(window.location.href="/login")}).catch(function(n){console.log(n)}).then(function(){});var e=b+":"+V+"/api/profile";y.get(e,{withCredentials:!0}).then(function(n){console.log(n.data[0]);var k=n.data[0].user_name;F().setUser({name:k,email:"john@example.com",avatar:"https://avatars.dicebear.com/api/avataaars/example.svg?options[top][]=shortHair&options[accessoriesChance]=93"})}).catch(function(n){console.log(n)}).then(function(){})},methods:{test:function(){console.log(1)},change:function(){console.log(1),window.location.href="/login"}}},re=Object.assign(le,{__name:"GoalsView",setup(D){const e=p(null);var n=[];e.value={purpose:0,d_day:new Date().toISOString().slice(0,10),current_weight:"",goal_weight:"",minimum_kcal:"",coeff:0};function k(o,a,u,l,s,i){var d;if(console.log("purpose",s),console.log("coeff",i),l.toLowerCase()=="f"){var m=[1,1.12,1.27,1.45];d=6.25*o+10*a-5*u-161,s==1&&(d*=m[i])}else{var m=[1,1.11,1.25,1.48];d=6.25*o+10*a-5*u+5,s==1&&(d*=m[i])}return d}function S(o,a,u,l){console.log(l);var s=new Date,i=l.split("-");console.log(i),console.log(s);let d=s.getFullYear(),m=s.getMonth()+1,O=s.getDay();var C=[d,m,O],Y=new Date(i[0],i[1],i[2]),j=new Date(C[0],C[1],C[2]);let U=Math.floor((Y-j)/(1e3*60*60*24));console.log("goal_days = "+U);var E=o-(u-a)/U*7e3;return E}const _=p(null);_.value=!1,(async()=>{try{var o=await y.get(b+":"+V+"/api/profile",{withCredentials:!0});console.log("response >>",o),e.value.purpose=o.data[0].purpose,e.value.current_weight=o.data[0].current_weight,n.push(o.data[0].height),n.push(o.data[0].gender),n.push(o.data[0].age),e.value.d_day=new Date(o.data[0].d_day).toISOString().split("T")[0],e.value.goal_weight=o.data[0].goal_weight,e.value.minimum_kcal=o.data[0].minimum_kcal,console.log("form >> ",e.value),_.value=!0}catch(a){console.log("Error >>",a)}})();const T=async()=>{for(var o=b+":"+V+"/api/profile/updateGoal",a=new FormData,u=["purpose","current_weight","goal_weight","minimum_kcal","d_day"],l=0;l<u.length;l++)a.append(u[l],e.value[u[l]]);var s=k(n[0],e.value[u[1]],n[2],n[1],e.value.purpose,e.value.coeff);a.append("bmr",s),console.log("bmr",s),a.append("kcal_per_day",S(s,e.value.goal_weight,e.value.current_weight,e.value.d_day)),console.log("test",a);try{var i=await y.post(o,a,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});console.log("response >> ",i),_.value=!0,window.location.href="/dashboard"}catch(d){console.log("Error >>",d)}};return p(!0),p(0),(o,a)=>{const u=P("UserCard");return x(),L(N,{onChange:o.change},{default:r(()=>[t(H,null,{default:r(()=>[_.value?B("",!0):(x(),$("div",q,[t(G,{bg:"greenBlue"},{default:r(({cardClass:l})=>[t(v,{class:I(l)},{default:r(()=>[f("div",J,[R,t(K,{style:{"text-align":"center"}}),X])]),_:2},1032,["class"])]),_:1})])),_.value?(x(),$("div",Z,[t(v,null,{default:r(()=>[t(W,{icon:g(Q),title:"\uB098\uC758 \uCCB4\uC911\uACFC \uBAA9\uD45C"},null,8,["icon"]),t(u,{class:"mb-6"}),f("div",ee,[t(v,null,{default:r(()=>[t(c,{label:"\uC0AC\uC6A9 \uBAA9\uC801"},{default:r(()=>[t(M,{modelValue:e.value.purpose,"onUpdate:modelValue":a[0]||(a[0]=l=>e.value.purpose=l),name:"sample-radio",type:"radio",options:{0:"\uB2E4\uC774\uC5B4\uD2B8",1:"\uBC8C\uD06C\uC5C5"}},null,8,["modelValue"])]),_:1}),t(c,{label:"\uB098\uC758 \uD65C\uB3D9\uC131\uD5A5 \uCCB4\uD06C"},{default:r(()=>[t(M,{modelValue:e.value.coeff,"onUpdate:modelValue":a[1]||(a[1]=l=>e.value.coeff=l),name:"coeff-radio",type:"radio",options:{0:"\uBE44\uD65C\uB3D9\uC801 : \uC77C\uC0C1\uC0DD\uD65C\uC5D0 \uD544\uC694\uD55C \uCD5C\uC18C\uD55C\uC758 \uD65C\uB3D9\uB9CC \uD568",1:"\uC800\uD65C\uB3D9\uC801 : \uC77C\uC0C1\uD65C\uB3D9 + 30~60\uBD84 \uAC00\uB7C9\uC758 \uAFB8\uC900\uD55C \uC6B4\uB3D9\uC744 \uD568",2:"\uD65C\uB3D9\uC801 : \uC77C\uC0C1\uD65C\uB3D9 + 60\uBD84 \uC774\uC0C1\uC758 \uAFB8\uC900\uD55C \uC6B4\uB3D9\uC744 \uD568",3:"\uB9E4\uC6B0 \uD65C\uB3D9\uC801 : \uC77C\uC0C1\uD65C\uB3D9 + 60\uBD84 \uAC00\uB7C9\uC758 \uBB34\uB09C\uD55C \uC6B4\uB3D9 + 30~60\uBD84\uC758 \uACA9\uD55C \uC6B4\uB3D9\uC744 \uD568"}},null,8,["modelValue"])]),_:1}),t(c,{label:"\uB9C8\uAC10 \uB0A0\uC9DC",help:"\uCD5C\uB300 \uD55C \uB2EC \uD6C4\uAE4C\uC9C0 \uC120\uD0DD\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."},{default:r(()=>[t(h,{modelValue:e.value.d_day,"onUpdate:modelValue":a[2]||(a[2]=l=>e.value.d_day=l),"icon-left":g(w),help:"TargetDate",placeholder:"\uBAA9\uD45C \uB0A0\uC9DC \uC785\uB825 [YYYYMMDD]",type:"date"},null,8,["modelValue","icon-left"])]),_:1})]),_:1}),t(v,null,{default:r(()=>[t(c,{label:"\uD604\uC7AC \uBAB8\uBB34\uAC8C(kg)"},{default:r(()=>[t(h,{modelValue:e.value.current_weight,"onUpdate:modelValue":a[3]||(a[3]=l=>e.value.current_weight=l),"icon-left":g(w),help:"CurrentWeight",placeholder:"\uC22B\uC790\uB85C\uB9CC \uC785\uB825",type:"number"},null,8,["modelValue","icon-left"])]),_:1}),t(c,{label:"\uBAA9\uD45C \uBAB8\uBB34\uAC8C(kg)"},{default:r(()=>[t(h,{modelValue:e.value.goal_weight,"onUpdate:modelValue":a[4]||(a[4]=l=>e.value.goal_weight=l),"icon-left":g(w),help:"TargetWeight",placeholder:"\uC22B\uC790\uB85C\uB9CC \uC785\uB825",type:"number"},null,8,["modelValue","icon-left"])]),_:1}),t(c,{label:"\uCD5C\uC18C \uC12D\uCDE8 \uCE7C\uB85C\uB9AC(kcal)",help:"\uD558\uB8E8 \uB3D9\uC548 \uC12D\uCDE8\uD560 \uCD5C\uC18C \uC5F4\uB7C9\uC785\uB2C8\uB2E4."},{default:r(()=>[t(h,{modelValue:e.value.minimum_kcal,"onUpdate:modelValue":a[5]||(a[5]=l=>e.value.minimum_kcal=l),"icon-left":g(w),help:"TargetKcal",placeholder:"\uC22B\uC790\uB85C\uB9CC \uC785\uB825",type:"number"},null,8,["modelValue","icon-left"])]),_:1}),t(z),f("div",ae,[t(A,{onClick:T,class:"w-3/12",type:"submit",color:"info",label:"\uC800\uC7A5"})])]),_:1})])]),_:1})])):B("",!0)]),_:1})]),_:1},8,["onChange"])}}});export{re as default};
